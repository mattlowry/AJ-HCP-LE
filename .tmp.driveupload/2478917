"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[603],{141:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(9662),a=s(579);const i=(0,n.A)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},3632:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(9662),a=s(579);const i=(0,n.A)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},7603:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var n=s(5043),a=s(6446),i=s(1637),r=s(5865),c=s(1906),l=s(7254),o=s(8903),d=s(2110),m=s(6494),x=s(7784),u=s(2143),h=s(4669),A=s(4056),j=s(9650),_=s(3336),v=s(1806),p=s(4882),b=s(8076),f=s(39),g=s(3460),y=s(3845),w=s(7392),S=s(3218),C=s(141),z=s(9484),D=s(3632),L=s(3560),I=s(9662),T=s(579);const E=(0,I.A)((0,T.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),F=(0,I.A)((0,T.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print"),M=()=>{const[e,t]=(0,n.useState)(0),[s,I]=(0,n.useState)([]),[M,P]=(0,n.useState)([]),[$,k]=(0,n.useState)([]),[N,V]=(0,n.useState)(!0),[W,B]=(0,n.useState)(null),[J,O]=(0,n.useState)(""),[H,Z]=(0,n.useState)(""),R=[{id:1,invoice_number:"INV-2024-0001",customer_name:"John Smith",customer_email:"john.smith@email.com",job_number:"JOB-2024-0001",status:"sent",invoice_date:"2024-01-15",due_date:"2024-02-14",subtotal:150,tax_amount:12,total_amount:162,amount_paid:0,amount_due:162,created_at:"2024-01-15T10:00:00Z"},{id:2,invoice_number:"INV-2024-0002",customer_name:"Sarah Davis",customer_email:"sarah.davis@email.com",job_number:"JOB-2024-0002",status:"paid",invoice_date:"2024-01-12",due_date:"2024-02-11",subtotal:800,tax_amount:64,total_amount:864,amount_paid:864,amount_due:0,created_at:"2024-01-12T14:30:00Z"},{id:3,invoice_number:"INV-2024-0003",customer_name:"Robert Brown",customer_email:"robert.brown@email.com",job_number:"JOB-2024-0003",status:"overdue",invoice_date:"2024-01-05",due_date:"2024-01-20",subtotal:450,tax_amount:36,total_amount:486,amount_paid:0,amount_due:486,created_at:"2024-01-05T09:15:00Z"}],Y=[{id:1,estimate_number:"EST-2024-0001",customer_name:"Lisa Garcia",customer_email:"lisa.garcia@email.com",status:"sent",estimate_date:"2024-01-10",expiration_date:"2024-02-10",subtotal:1200,tax_amount:96,total_amount:1296,created_at:"2024-01-10T11:00:00Z"},{id:2,estimate_number:"EST-2024-0002",customer_name:"Mark Wilson",customer_email:"mark.wilson@email.com",status:"accepted",estimate_date:"2024-01-08",expiration_date:"2024-02-08",subtotal:300,tax_amount:24,total_amount:324,created_at:"2024-01-08T16:20:00Z"}],G=[{id:1,reference_number:"PAY-2024-0001",invoice_number:"INV-2024-0002",customer_name:"Sarah Davis",amount:864,payment_method:"credit_card",payment_date:"2024-01-14",status:"completed"},{id:2,reference_number:"PAY-2024-0002",invoice_number:"INV-2024-0001",customer_name:"John Smith",amount:100,payment_method:"check",payment_date:"2024-01-16",status:"pending"}];(0,n.useEffect)((()=>{(async()=>{try{V(!0),B(""),I(R),P(Y),k(G),V(!1)}catch(e){console.error("Error loading billing data:",e),B("Failed to load billing data. Using demo data."),I(R),P(Y),k(G),V(!1)}})()}),[]);const U=e=>{switch(e){case"draft":default:return"default";case"sent":return"info";case"viewed":case"pending":return"warning";case"paid":case"accepted":case"completed":return"success";case"overdue":case"declined":case"expired":return"error"}},q=s.filter((e=>{const t=e.invoice_number.toLowerCase().includes(J.toLowerCase())||e.customer_name.toLowerCase().includes(J.toLowerCase()),s=""===H||e.status===H;return t&&s})),K=M.filter((e=>{const t=e.estimate_number.toLowerCase().includes(J.toLowerCase())||e.customer_name.toLowerCase().includes(J.toLowerCase()),s=""===H||e.status===H;return t&&s})),Q=$.filter((e=>{const t=e.reference_number.toLowerCase().includes(J.toLowerCase())||e.customer_name.toLowerCase().includes(J.toLowerCase())||e.invoice_number.toLowerCase().includes(J.toLowerCase()),s=""===H||e.status===H;return t&&s})),X={totalRevenue:s.filter((e=>"paid"===e.status)).reduce(((e,t)=>e+t.total_amount),0),outstandingAmount:s.filter((e=>"paid"!==e.status)).reduce(((e,t)=>e+t.amount_due),0),overdueAmount:s.filter((e=>"overdue"===e.status)).reduce(((e,t)=>e+t.amount_due),0),pendingEstimates:M.filter((e=>"sent"===e.status)).reduce(((e,t)=>e+t.total_amount),0)};return N?(0,T.jsxs)(a.A,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",children:[(0,T.jsx)(i.A,{size:40,sx:{mb:2}}),(0,T.jsx)(r.A,{variant:"h6",color:"textSecondary",children:"Loading billing data..."})]}):(0,T.jsxs)(a.A,{children:[(0,T.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,T.jsx)(r.A,{variant:"h4",component:"h1",children:"Billing & Invoicing"}),(0,T.jsxs)(a.A,{children:[(0,T.jsx)(c.A,{variant:"outlined",startIcon:(0,T.jsx)(S.A,{}),sx:{mr:1},children:"New Estimate"}),(0,T.jsx)(c.A,{variant:"contained",startIcon:(0,T.jsx)(C.A,{}),children:"New Invoice"})]})]}),W&&(0,T.jsx)(l.A,{severity:"error",sx:{mb:2},children:W}),(0,T.jsxs)(o.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,T.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(d.A,{children:(0,T.jsxs)(m.A,{children:[(0,T.jsx)(r.A,{variant:"h6",color:"success.main",children:"Total Revenue"}),(0,T.jsxs)(r.A,{variant:"h4",children:["$",X.totalRevenue.toFixed(2)]})]})})}),(0,T.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(d.A,{children:(0,T.jsxs)(m.A,{children:[(0,T.jsx)(r.A,{variant:"h6",color:"warning.main",children:"Outstanding"}),(0,T.jsxs)(r.A,{variant:"h4",children:["$",X.outstandingAmount.toFixed(2)]})]})})}),(0,T.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(d.A,{children:(0,T.jsxs)(m.A,{children:[(0,T.jsx)(r.A,{variant:"h6",color:"error.main",children:"Overdue"}),(0,T.jsxs)(r.A,{variant:"h4",children:["$",X.overdueAmount.toFixed(2)]})]})})}),(0,T.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(d.A,{children:(0,T.jsxs)(m.A,{children:[(0,T.jsx)(r.A,{variant:"h6",color:"info.main",children:"Pending Estimates"}),(0,T.jsxs)(r.A,{variant:"h4",children:["$",X.pendingEstimates.toFixed(2)]})]})})})]}),(0,T.jsxs)(o.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,T.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(x.A,{fullWidth:!0,label:"Search...",value:J,onChange:e=>O(e.target.value),InputProps:{startAdornment:(0,T.jsx)(z.A,{color:"action",sx:{mr:1}})}})}),(0,T.jsx)(o.Ay,{item:!0,xs:12,md:3,children:(0,T.jsxs)(x.A,{select:!0,fullWidth:!0,label:"Status",value:H,onChange:e=>Z(e.target.value),children:[(0,T.jsx)(u.A,{value:"",children:"All Statuses"}),(0,T.jsx)(u.A,{value:"draft",children:"Draft"}),(0,T.jsx)(u.A,{value:"sent",children:"Sent"}),(0,T.jsx)(u.A,{value:"paid",children:"Paid"}),(0,T.jsx)(u.A,{value:"overdue",children:"Overdue"}),(0,T.jsx)(u.A,{value:"accepted",children:"Accepted"}),(0,T.jsx)(u.A,{value:"declined",children:"Declined"})]})})]}),(0,T.jsx)(a.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,T.jsxs)(h.A,{value:e,onChange:(e,s)=>t(s),children:[(0,T.jsx)(A.A,{label:"Invoices (".concat(s.length,")")}),(0,T.jsx)(A.A,{label:"Estimates (".concat(M.length,")")}),(0,T.jsx)(A.A,{label:"Payments (".concat($.length,")")})]})}),0===e&&(0,T.jsx)(j.A,{component:_.A,children:(0,T.jsxs)(v.A,{children:[(0,T.jsx)(p.A,{children:(0,T.jsxs)(b.A,{children:[(0,T.jsx)(f.A,{children:"Invoice #"}),(0,T.jsx)(f.A,{children:"Customer"}),(0,T.jsx)(f.A,{children:"Job #"}),(0,T.jsx)(f.A,{children:"Status"}),(0,T.jsx)(f.A,{children:"Invoice Date"}),(0,T.jsx)(f.A,{children:"Due Date"}),(0,T.jsx)(f.A,{children:"Total Amount"}),(0,T.jsx)(f.A,{children:"Amount Due"}),(0,T.jsx)(f.A,{children:"Actions"})]})}),(0,T.jsx)(g.A,{children:q.map((e=>(0,T.jsxs)(b.A,{children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(r.A,{variant:"body2",fontWeight:"bold",children:e.invoice_number})}),(0,T.jsx)(f.A,{children:(0,T.jsxs)(a.A,{children:[(0,T.jsx)(r.A,{variant:"body2",children:e.customer_name}),(0,T.jsx)(r.A,{variant:"caption",color:"text.secondary",children:e.customer_email})]})}),(0,T.jsx)(f.A,{children:e.job_number||"-"}),(0,T.jsx)(f.A,{children:(0,T.jsx)(y.A,{label:e.status,color:U(e.status),size:"small",sx:{textTransform:"capitalize"}})}),(0,T.jsx)(f.A,{children:new Date(e.invoice_date).toLocaleDateString()}),(0,T.jsx)(f.A,{children:new Date(e.due_date).toLocaleDateString()}),(0,T.jsxs)(f.A,{children:["$",e.total_amount.toFixed(2)]}),(0,T.jsx)(f.A,{children:(0,T.jsxs)(r.A,{color:e.amount_due>0?"error.main":"success.main",fontWeight:"bold",children:["$",e.amount_due.toFixed(2)]})}),(0,T.jsx)(f.A,{children:(0,T.jsxs)(a.A,{display:"flex",gap:1,children:[(0,T.jsx)(w.A,{size:"small",color:"primary",children:(0,T.jsx)(D.A,{})}),(0,T.jsx)(w.A,{size:"small",color:"primary",children:(0,T.jsx)(L.A,{})}),(0,T.jsx)(w.A,{size:"small",color:"info",children:(0,T.jsx)(E,{})}),(0,T.jsx)(w.A,{size:"small",color:"secondary",children:(0,T.jsx)(F,{})})]})})]},e.id)))})]})}),1===e&&(0,T.jsx)(j.A,{component:_.A,children:(0,T.jsxs)(v.A,{children:[(0,T.jsx)(p.A,{children:(0,T.jsxs)(b.A,{children:[(0,T.jsx)(f.A,{children:"Estimate #"}),(0,T.jsx)(f.A,{children:"Customer"}),(0,T.jsx)(f.A,{children:"Status"}),(0,T.jsx)(f.A,{children:"Estimate Date"}),(0,T.jsx)(f.A,{children:"Expiration Date"}),(0,T.jsx)(f.A,{children:"Total Amount"}),(0,T.jsx)(f.A,{children:"Actions"})]})}),(0,T.jsx)(g.A,{children:K.map((e=>(0,T.jsxs)(b.A,{children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(r.A,{variant:"body2",fontWeight:"bold",children:e.estimate_number})}),(0,T.jsx)(f.A,{children:(0,T.jsxs)(a.A,{children:[(0,T.jsx)(r.A,{variant:"body2",children:e.customer_name}),(0,T.jsx)(r.A,{variant:"caption",color:"text.secondary",children:e.customer_email})]})}),(0,T.jsx)(f.A,{children:(0,T.jsx)(y.A,{label:e.status,color:U(e.status),size:"small",sx:{textTransform:"capitalize"}})}),(0,T.jsx)(f.A,{children:new Date(e.estimate_date).toLocaleDateString()}),(0,T.jsx)(f.A,{children:new Date(e.expiration_date).toLocaleDateString()}),(0,T.jsxs)(f.A,{children:["$",e.total_amount.toFixed(2)]}),(0,T.jsx)(f.A,{children:(0,T.jsxs)(a.A,{display:"flex",gap:1,children:[(0,T.jsx)(w.A,{size:"small",color:"primary",children:(0,T.jsx)(D.A,{})}),(0,T.jsx)(w.A,{size:"small",color:"primary",children:(0,T.jsx)(L.A,{})}),(0,T.jsx)(w.A,{size:"small",color:"info",children:(0,T.jsx)(E,{})}),(0,T.jsx)(w.A,{size:"small",color:"secondary",children:(0,T.jsx)(F,{})})]})})]},e.id)))})]})}),2===e&&(0,T.jsx)(j.A,{component:_.A,children:(0,T.jsxs)(v.A,{children:[(0,T.jsx)(p.A,{children:(0,T.jsxs)(b.A,{children:[(0,T.jsx)(f.A,{children:"Payment #"}),(0,T.jsx)(f.A,{children:"Invoice #"}),(0,T.jsx)(f.A,{children:"Customer"}),(0,T.jsx)(f.A,{children:"Amount"}),(0,T.jsx)(f.A,{children:"Method"}),(0,T.jsx)(f.A,{children:"Date"}),(0,T.jsx)(f.A,{children:"Status"}),(0,T.jsx)(f.A,{children:"Actions"})]})}),(0,T.jsx)(g.A,{children:Q.map((e=>(0,T.jsxs)(b.A,{children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(r.A,{variant:"body2",fontWeight:"bold",children:e.reference_number})}),(0,T.jsx)(f.A,{children:e.invoice_number}),(0,T.jsx)(f.A,{children:e.customer_name}),(0,T.jsxs)(f.A,{children:["$",e.amount.toFixed(2)]}),(0,T.jsx)(f.A,{sx:{textTransform:"capitalize"},children:e.payment_method.replace("_"," ")}),(0,T.jsx)(f.A,{children:new Date(e.payment_date).toLocaleDateString()}),(0,T.jsx)(f.A,{children:(0,T.jsx)(y.A,{label:e.status,color:U(e.status),size:"small",sx:{textTransform:"capitalize"}})}),(0,T.jsx)(f.A,{children:(0,T.jsxs)(a.A,{display:"flex",gap:1,children:[(0,T.jsx)(w.A,{size:"small",color:"primary",children:(0,T.jsx)(D.A,{})}),(0,T.jsx)(w.A,{size:"small",color:"primary",children:(0,T.jsx)(L.A,{})})]})})]},e.id)))})]})})]})}},9484:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(9662),a=s(579);const i=(0,n.A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=603.8f5343e1.chunk.js.map