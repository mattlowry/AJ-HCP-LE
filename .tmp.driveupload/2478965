"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[606],{1606:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var a=r(5043),n=r(6446),o=r(5865),s=r(6291),c=r(8003);var i=r(9274),l=r(8903),d=r(6494),u=r(1045),g=r(5155),p=r(9509),h=r(1209),m=r(7957),x=r(2796),v=r(6196);var b=r(579);const y=e=>{let{stats:t}=e;const r=[{title:"Total Customers",value:t.totalCustomers.toString(),change:"+12%",icon:(0,b.jsx)(g.A,{}),gradient:"linear-gradient(135deg, #4A90E2 0%, #357ABD 100%)",bgColor:"rgba(74, 144, 226, 0.1)"},{title:"Active Jobs",value:t.activeJobs.toString(),change:"+8%",icon:(0,b.jsx)(p.A,{}),gradient:"linear-gradient(135deg, #51C878 0%, #3A9B5C 100%)",bgColor:"rgba(81, 200, 120, 0.1)"},{title:"Today's Schedule",value:t.todaySchedule.toString(),change:"+5%",icon:(0,b.jsx)(h.A,{}),gradient:"linear-gradient(135deg, #FFD93D 0%, #E6C234 100%)",bgColor:"rgba(255, 217, 61, 0.1)"},{title:"Monthly Revenue",value:(a=t.monthlyRevenue,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a)),change:"+18%",icon:(0,b.jsx)(m.A,{}),gradient:"linear-gradient(135deg, #FF6B6B 0%, #E55555 100%)",bgColor:"rgba(255, 107, 107, 0.1)"}];var a;return(0,b.jsx)(l.Ay,{container:!0,spacing:3,sx:{mb:5},children:r.map(((e,t)=>(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,lg:3,children:(0,b.jsx)(v.A,{variant:"elevated",glow:!0,sx:{height:"100%",background:"linear-gradient(135deg, ".concat(e.bgColor," 0%, rgba(255, 255, 255, 0.8) 100%)"),"&:hover":{transform:"translateY(-4px) scale(1.02)"}},children:(0,b.jsxs)(d.A,{sx:{p:3},children:[(0,b.jsxs)(n.A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[(0,b.jsx)(u.A,{sx:{width:56,height:56,background:e.gradient,boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.15)"},children:e.icon}),(0,b.jsxs)(n.A,{display:"flex",alignItems:"center",sx:{color:"#51C878",backgroundColor:"rgba(81, 200, 120, 0.1)",borderRadius:"12px",px:1.5,py:.5},children:[(0,b.jsx)(x.A,{sx:{fontSize:16,mr:.5}}),(0,b.jsx)(o.A,{variant:"caption",sx:{fontWeight:600},children:e.change})]})]}),(0,b.jsx)(o.A,{color:"text.secondary",sx:{fontSize:"0.875rem",fontWeight:500,mb:1},children:e.title}),(0,b.jsx)(o.A,{variant:"h4",component:"div",sx:{fontWeight:700,color:"#202124"},children:e.value})]})})},t)))})};var A=r(3218),f=r(8970),w=r(9558),j=r(3260);const S=()=>{const e=(0,j.Zp)(),t=[{title:"Manage Jobs",description:"View and manage all work orders",icon:(0,b.jsx)(p.A,{}),action:()=>e("/jobs")},{title:"Schedule Calendar",description:"View scheduling calendar",icon:(0,b.jsx)(h.A,{}),action:()=>e("/scheduling")},{title:"Billing & Invoices",description:"Manage invoices and payments",icon:(0,b.jsx)(A.A,{}),action:()=>e("/billing")},{title:"Inventory",description:"Manage parts and supplies",icon:(0,b.jsx)(f.A,{}),action:()=>e("/inventory")},{title:"Analytics",description:"Business reports and insights",icon:(0,b.jsx)(w.A,{}),action:()=>e("/analytics")},{title:"Add Customer",description:"Create new customer profile",icon:(0,b.jsx)(g.A,{}),action:()=>e("/customers/new")}];return(0,b.jsx)(l.Ay,{container:!0,spacing:3,children:t.map(((e,t)=>(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,lg:4,children:(0,b.jsx)(v.A,{variant:"glass",sx:{height:"100%",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-6px) scale(1.02)",boxShadow:"0px 12px 40px rgba(74, 144, 226, 0.15)"}},onClick:e.action,children:(0,b.jsxs)(d.A,{sx:{p:3},children:[(0,b.jsxs)(n.A,{display:"flex",alignItems:"center",mb:2.5,children:[(0,b.jsx)(u.A,{sx:{width:48,height:48,background:"linear-gradient(135deg, #4A90E2 0%, #357ABD 100%)",mr:2,boxShadow:"0px 4px 12px rgba(74, 144, 226, 0.3)"},children:e.icon}),(0,b.jsx)(o.A,{variant:"h6",component:"div",sx:{fontWeight:600,color:"#202124"},children:e.title})]}),(0,b.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem",lineHeight:1.6},children:e.description})]})})},t)))})},k=()=>{const{loading:e,stats:t}=(()=>{const[e,t]=(0,a.useState)(!0),[r,n]=(0,a.useState)(null),[o,i]=(0,a.useState)({totalCustomers:0,activeJobs:0,todaySchedule:0,monthlyRevenue:0}),{get:l,set:d}=(0,c.WR)(),u=(0,c.pO)((()=>({today:(new Date).toISOString().split("T")[0],currentMonth:(new Date).getMonth(),currentYear:(new Date).getFullYear()})),[],"DateCalculations"),g=(0,a.useCallback)((e=>{const t=["pending","scheduled","in_progress"];return{activeJobs:e.filter((e=>t.includes(e.status))).length,todaySchedule:e.filter((e=>e.scheduled_start&&e.scheduled_start.startsWith(u.today))).length}}),[u.today]),p=(0,a.useCallback)((e=>e.filter((e=>"completed"===e.status&&e.updated_at&&new Date(e.updated_at).getMonth()===u.currentMonth&&new Date(e.updated_at).getFullYear()===u.currentYear)).reduce(((e,t)=>e+(t.actual_cost||t.estimated_cost||0)),0)),[u.currentMonth,u.currentYear]),h=(0,a.useCallback)((async()=>{try{t(!0),n(null);const e="dashboard-".concat(u.today),r=l(e);if(r)return i(r),void t(!1);const[a,o,c]=await Promise.allSettled([s.dr.getAll(),s.S.getAll(),s.LP.getFinancialSummary()]),h="fulfilled"===a.status&&a.value.data.results||[],m="fulfilled"===o.status&&o.value.data.results||[],{activeJobs:x,todaySchedule:v}=g(m);let b=0;b="fulfilled"===c.status?c.value.data.monthly_revenue||0:p(m);const y={totalCustomers:h.length,activeJobs:x,todaySchedule:v,monthlyRevenue:b};d(e,y),i(y)}catch(r){const t=r instanceof Error?r.message:"Failed to load dashboard data";n(t),console.error("Error loading dashboard data:",r)}finally{t(!1)}}),[u,l,d,g,p]);return(0,a.useEffect)((()=>{h()}),[h]),{loading:e,stats:o,error:r,refetch:h}})();return e?(0,b.jsx)(i.A,{message:"Loading dashboard..."}):(0,b.jsxs)(n.A,{sx:{p:{xs:2,md:3}},children:[(0,b.jsxs)(n.A,{sx:{mb:4},children:[(0,b.jsx)(o.A,{variant:"h3",component:"h1",sx:{fontWeight:700,background:"linear-gradient(135deg, #2E5A8A 0%, #4A90E2 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:1},children:"Dashboard"}),(0,b.jsx)(o.A,{variant:"h6",color:"text.secondary",sx:{fontWeight:400},children:"Welcome back! Here's what's happening with your business today."})]}),(0,b.jsx)(y,{stats:t}),(0,b.jsx)(o.A,{variant:"h5",component:"h2",sx:{fontWeight:600,mb:3,color:"#202124"},children:"Quick Actions"}),(0,b.jsx)(S,{})]})}},2796:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(9662),n=r(579);const o=(0,a.A)((0,n.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},6196:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(2555),n=r(45),o=(r(5043),r(2110)),s=r(579);const c=["variant","glow","children","sx"],i=e=>{let{variant:t="default",glow:r=!1,children:i,sx:l}=e,d=(0,n.A)(e,c);const u=(()=>{const e={borderRadius:"20px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(0, 0, 0, 0.04)",position:"relative",overflow:"hidden","&::before":r?{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(74, 144, 226, 0.1) 0%, rgba(116, 185, 255, 0.05) 100%)",opacity:0,transition:"opacity 0.3s ease",zIndex:0}:{},"&:hover":{transform:"translateY(-4px)","&::before":r?{opacity:1}:{}},"& > *":{position:"relative",zIndex:1}};switch(t){case"elevated":return(0,a.A)((0,a.A)({},e),{},{boxShadow:"0px 8px 32px rgba(0, 0, 0, 0.08)",background:"linear-gradient(135deg, #FFFFFF 0%, #FAFBFC 100%)","&:hover":(0,a.A)((0,a.A)({},e["&:hover"]),{},{boxShadow:"0px 12px 40px rgba(0, 0, 0, 0.12)"})});case"glass":return(0,a.A)((0,a.A)({},e),{},{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.06)",border:"1px solid rgba(255, 255, 255, 0.2)","&:hover":(0,a.A)((0,a.A)({},e["&:hover"]),{},{background:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 8px 30px rgba(0, 0, 0, 0.1)"})});case"gradient":return(0,a.A)((0,a.A)({},e),{},{background:"linear-gradient(135deg, rgba(74, 144, 226, 0.02) 0%, rgba(116, 185, 255, 0.02) 100%)",border:"1px solid rgba(74, 144, 226, 0.1)",boxShadow:"0px 4px 20px rgba(74, 144, 226, 0.08)","&:hover":(0,a.A)((0,a.A)({},e["&:hover"]),{},{background:"linear-gradient(135deg, rgba(74, 144, 226, 0.04) 0%, rgba(116, 185, 255, 0.04) 100%)",boxShadow:"0px 8px 30px rgba(74, 144, 226, 0.12)"})});default:return(0,a.A)((0,a.A)({},e),{},{background:"#FFFFFF",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.06)","&:hover":(0,a.A)((0,a.A)({},e["&:hover"]),{},{boxShadow:"0px 8px 30px rgba(0, 0, 0, 0.10)"})})}})();return(0,s.jsx)(o.A,(0,a.A)((0,a.A)({sx:[u,...Array.isArray(l)?l:[l]]},d),{},{children:i}))}},6291:(e,t,r)=>{r.d(t,{Ay:()=>p,LP:()=>g,S:()=>l,Up:()=>i,dr:()=>c,l:()=>d,pO:()=>u});var a=r(9722),n=r(4703);const o=a.A.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"},timeout:1e4});o.interceptors.request.use((e=>{var t;e.metadata={startTime:performance.now()};const r=localStorage.getItem("authToken");r&&(e.headers.Authorization="Bearer ".concat(r)),e.headers["X-Requested-With"]="XMLHttpRequest";const a=null===(t=document.querySelector('meta[name="csrf-token"]'))||void 0===t?void 0:t.getAttribute("content");return a&&(e.headers["X-CSRF-Token"]=a),e}),(e=>(n.Fk.handleError(e,{component:"APIService",action:"Request Interceptor",userMessage:"Failed to prepare API request"}),Promise.reject(e)))),o.interceptors.response.use((e=>{var t;const r=e.config,a=performance.now()-((null===(t=r.metadata)||void 0===t?void 0:t.startTime)||0);var o,s;a>2e3&&(console.warn("\u26a0\ufe0f Slow API call: ".concat(null===(o=e.config.method)||void 0===o?void 0:o.toUpperCase()," ").concat(e.config.url," took ").concat(Math.round(a),"ms")),n.Fk.handleError(new Error("Slow API response"),{component:"APIService",action:"Slow Response: ".concat(null===(s=e.config.method)||void 0===s?void 0:s.toUpperCase()," ").concat(e.config.url),userMessage:"API response was slower than expected"}));return e}),(async e=>{var t,a,c,i,l;n.Fk.handleError(e,{component:"APIService",action:"".concat(null===(t=e.config)||void 0===t||null===(a=t.method)||void 0===a?void 0:a.toUpperCase()," ").concat(null===(c=e.config)||void 0===c?void 0:c.url),userMessage:s(e)});if(401===(null===(i=e.response)||void 0===i?void 0:i.status)){const{authService:t}=await r.e(422).then(r.bind(r,1422)),a=await t.refreshToken();if(a&&e.config)return e.config.headers.Authorization="Bearer ".concat(a),o.request(e.config);t.logout()}if(429===(null===(l=e.response)||void 0===l?void 0:l.status)){const t=e.response.headers["retry-after"],r=t?1e3*parseInt(t):1e3;return console.warn("Rate limited. Retrying after ".concat(r,"ms")),new Promise(((t,a)=>{setTimeout((()=>{e.config?o.request(e.config).then(t).catch(a):a(e)}),r)}))}return Promise.reject(e)}));const s=e=>{if(!e.response)return"Network connection error. Please check your internet connection.";const t=e.response.status,r=e.response.data;switch(t){case 400:return(null===r||void 0===r?void 0:r.message)||"Invalid request. Please check your input.";case 401:return"Your session has expired. Please log in again.";case 403:return"You do not have permission to perform this action.";case 404:return"The requested resource was not found.";case 422:return(null===r||void 0===r?void 0:r.message)||"Please check your input and try again.";case 429:return"Too many requests. Please wait a moment and try again.";case 500:return"Server error occurred. Our team has been notified.";case 502:case 503:case 504:return"Service temporarily unavailable. Please try again later.";default:return(null===r||void 0===r?void 0:r.message)||"An unexpected error occurred. Please try again."}},c={getAll:e=>o.get("/customers/",{params:e}),getById:e=>o.get("/customers/".concat(e,"/")),create:e=>o.post("/customers/",e),update:(e,t)=>o.put("/customers/".concat(e,"/"),t),delete:e=>o.delete("/customers/".concat(e,"/")),getProperties:e=>o.get("/customers/".concat(e,"/properties/")),addProperty:(e,t)=>o.post("/customers/".concat(e,"/add_property/"),t),getContacts:e=>o.get("/customers/".concat(e,"/contacts/")),addContact:(e,t)=>o.post("/customers/".concat(e,"/add_contact/"),t),getReviews:e=>o.get("/customers/".concat(e,"/reviews/")),addReview:(e,t)=>o.post("/customers/".concat(e,"/add_review/"),t)},i={getAll:e=>o.get("/properties/",{params:e}),getById:e=>o.get("/properties/".concat(e,"/")),create:e=>o.post("/properties/",e),update:(e,t)=>o.put("/properties/".concat(e,"/"),t),delete:e=>o.delete("/properties/".concat(e,"/"))},l={getAll:e=>o.get("/jobs/",{params:e}),getById:e=>o.get("/jobs/".concat(e,"/")),create:e=>o.post("/jobs/",e),update:(e,t)=>o.put("/jobs/".concat(e,"/"),t),delete:e=>o.delete("/jobs/".concat(e,"/")),updateStatus:(e,t)=>o.patch("/jobs/".concat(e,"/update_status/"),{status:t}),assignTechnicians:(e,t)=>o.patch("/jobs/".concat(e,"/assign_technicians/"),{technician_ids:t})},d={getAll:e=>o.get("/jobs/technicians/",{params:e}),getAvailable:e=>o.get("/jobs/technicians/available/",{params:e}),getById:e=>o.get("/jobs/technicians/".concat(e,"/"))},u={getItems:e=>o.get("/inventory/items/",{params:e}),getItemById:e=>o.get("/inventory/items/".concat(e,"/")),createItem:e=>o.post("/inventory/items/",e),updateItem:(e,t)=>o.put("/inventory/items/".concat(e,"/"),t),deleteItem:e=>o.delete("/inventory/items/".concat(e,"/")),adjustStock:(e,t,r)=>o.post("/inventory/items/".concat(e,"/adjust_stock/"),{quantity:t,reason:r}),getCategories:()=>o.get("/inventory/categories/"),createCategory:e=>o.post("/inventory/categories/",e),getSuppliers:()=>o.get("/inventory/suppliers/"),createSupplier:e=>o.post("/inventory/suppliers/",e),getStockMovements:e=>o.get("/inventory/stock-movements/",{params:e}),getPurchaseOrders:e=>o.get("/inventory/purchase-orders/",{params:e}),createPurchaseOrder:e=>o.post("/inventory/purchase-orders/",e),updatePurchaseOrder:(e,t)=>o.put("/inventory/purchase-orders/".concat(e,"/"),t)},g={getBusinessOverview:()=>o.get("/analytics/analytics/business_overview/"),getFinancialSummary:()=>o.get("/analytics/analytics/financial_summary/"),getOperationalMetrics:()=>o.get("/analytics/analytics/operational_metrics/"),getCustomerInsights:()=>o.get("/analytics/analytics/customer_insights/"),getInventoryInsights:()=>o.get("/analytics/analytics/inventory_insights/")},p=o},7957:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(9662),n=r(579);const o=(0,a.A)((0,n.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney")},8003:(e,t,r)=>{r.d(t,{Io:()=>o,WR:()=>s,pO:()=>n});var a=r(5043);r(3536);const n=(e,t,r)=>(0,a.useMemo)((()=>{const t=performance.now(),r=e();performance.now();return r}),t),o=e=>{const t=(0,a.useRef)(0),r=(0,a.useRef)(0);t.current=performance.now(),(0,a.useEffect)((()=>{r.current=performance.now();r.current,t.current;return()=>{performance.now(),r.current}}),[e]),(0,a.useEffect)((()=>{if(t.current){performance.now(),t.current;0}}))},s=()=>{const e=(0,a.useRef)(new Map);return{get:(0,a.useCallback)((t=>{const r=e.current.get(t);if(r){return Date.now()-r.timestamp>3e5?(e.current.delete(t),null):r.data}return null}),[]),set:(0,a.useCallback)(((t,r)=>{e.current.set(t,{data:r,timestamp:Date.now()})}),[]),clear:(0,a.useCallback)((()=>{e.current.clear()}),[]),size:e.current.size}}}}]);
//# sourceMappingURL=606.f0e32829.chunk.js.map