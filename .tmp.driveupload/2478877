"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[932],{141:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(9662),o=t(579);const n=(0,a.A)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},3632:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(9662),o=t(579);const n=(0,a.A)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},4770:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(9662),o=t(579);const n=(0,a.A)((0,o.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business")},6196:(e,r,t)=>{t.d(r,{A:()=>c});var a=t(2555),o=t(45),n=(t(5043),t(2110)),s=t(579);const i=["variant","glow","children","sx"],c=e=>{let{variant:r="default",glow:t=!1,children:c,sx:d}=e,l=(0,o.A)(e,i);const p=(()=>{const e={borderRadius:"20px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(0, 0, 0, 0.04)",position:"relative",overflow:"hidden","&::before":t?{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(74, 144, 226, 0.1) 0%, rgba(116, 185, 255, 0.05) 100%)",opacity:0,transition:"opacity 0.3s ease",zIndex:0}:{},"&:hover":{transform:"translateY(-4px)","&::before":t?{opacity:1}:{}},"& > *":{position:"relative",zIndex:1}};switch(r){case"elevated":return(0,a.A)((0,a.A)({},e),{},{boxShadow:"0px 8px 32px rgba(0, 0, 0, 0.08)",background:"linear-gradient(135deg, #FFFFFF 0%, #FAFBFC 100%)","&:hover":(0,a.A)((0,a.A)({},e["&:hover"]),{},{boxShadow:"0px 12px 40px rgba(0, 0, 0, 0.12)"})});case"glass":return(0,a.A)((0,a.A)({},e),{},{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.06)",border:"1px solid rgba(255, 255, 255, 0.2)","&:hover":(0,a.A)((0,a.A)({},e["&:hover"]),{},{background:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 8px 30px rgba(0, 0, 0, 0.1)"})});case"gradient":return(0,a.A)((0,a.A)({},e),{},{background:"linear-gradient(135deg, rgba(74, 144, 226, 0.02) 0%, rgba(116, 185, 255, 0.02) 100%)",border:"1px solid rgba(74, 144, 226, 0.1)",boxShadow:"0px 4px 20px rgba(74, 144, 226, 0.08)","&:hover":(0,a.A)((0,a.A)({},e["&:hover"]),{},{background:"linear-gradient(135deg, rgba(74, 144, 226, 0.04) 0%, rgba(116, 185, 255, 0.04) 100%)",boxShadow:"0px 8px 30px rgba(74, 144, 226, 0.12)"})});default:return(0,a.A)((0,a.A)({},e),{},{background:"#FFFFFF",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.06)","&:hover":(0,a.A)((0,a.A)({},e["&:hover"]),{},{boxShadow:"0px 8px 30px rgba(0, 0, 0, 0.10)"})})}})();return(0,s.jsx)(n.A,(0,a.A)((0,a.A)({sx:[p,...Array.isArray(d)?d:[d]]},l),{},{children:c}))}},6291:(e,r,t)=>{t.d(r,{Ay:()=>u,LP:()=>g,S:()=>d,Up:()=>c,dr:()=>i,l:()=>l,pO:()=>p});var a=t(9722),o=t(4703);const n=a.A.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"},timeout:1e4});n.interceptors.request.use((e=>{var r;e.metadata={startTime:performance.now()};const t=localStorage.getItem("authToken");t&&(e.headers.Authorization="Bearer ".concat(t)),e.headers["X-Requested-With"]="XMLHttpRequest";const a=null===(r=document.querySelector('meta[name="csrf-token"]'))||void 0===r?void 0:r.getAttribute("content");return a&&(e.headers["X-CSRF-Token"]=a),e}),(e=>(o.Fk.handleError(e,{component:"APIService",action:"Request Interceptor",userMessage:"Failed to prepare API request"}),Promise.reject(e)))),n.interceptors.response.use((e=>{var r;const t=e.config,a=performance.now()-((null===(r=t.metadata)||void 0===r?void 0:r.startTime)||0);var n,s;a>2e3&&(console.warn("\u26a0\ufe0f Slow API call: ".concat(null===(n=e.config.method)||void 0===n?void 0:n.toUpperCase()," ").concat(e.config.url," took ").concat(Math.round(a),"ms")),o.Fk.handleError(new Error("Slow API response"),{component:"APIService",action:"Slow Response: ".concat(null===(s=e.config.method)||void 0===s?void 0:s.toUpperCase()," ").concat(e.config.url),userMessage:"API response was slower than expected"}));return e}),(async e=>{var r,a,i,c,d;o.Fk.handleError(e,{component:"APIService",action:"".concat(null===(r=e.config)||void 0===r||null===(a=r.method)||void 0===a?void 0:a.toUpperCase()," ").concat(null===(i=e.config)||void 0===i?void 0:i.url),userMessage:s(e)});if(401===(null===(c=e.response)||void 0===c?void 0:c.status)){const{authService:r}=await t.e(422).then(t.bind(t,1422)),a=await r.refreshToken();if(a&&e.config)return e.config.headers.Authorization="Bearer ".concat(a),n.request(e.config);r.logout()}if(429===(null===(d=e.response)||void 0===d?void 0:d.status)){const r=e.response.headers["retry-after"],t=r?1e3*parseInt(r):1e3;return console.warn("Rate limited. Retrying after ".concat(t,"ms")),new Promise(((r,a)=>{setTimeout((()=>{e.config?n.request(e.config).then(r).catch(a):a(e)}),t)}))}return Promise.reject(e)}));const s=e=>{if(!e.response)return"Network connection error. Please check your internet connection.";const r=e.response.status,t=e.response.data;switch(r){case 400:return(null===t||void 0===t?void 0:t.message)||"Invalid request. Please check your input.";case 401:return"Your session has expired. Please log in again.";case 403:return"You do not have permission to perform this action.";case 404:return"The requested resource was not found.";case 422:return(null===t||void 0===t?void 0:t.message)||"Please check your input and try again.";case 429:return"Too many requests. Please wait a moment and try again.";case 500:return"Server error occurred. Our team has been notified.";case 502:case 503:case 504:return"Service temporarily unavailable. Please try again later.";default:return(null===t||void 0===t?void 0:t.message)||"An unexpected error occurred. Please try again."}},i={getAll:e=>n.get("/customers/",{params:e}),getById:e=>n.get("/customers/".concat(e,"/")),create:e=>n.post("/customers/",e),update:(e,r)=>n.put("/customers/".concat(e,"/"),r),delete:e=>n.delete("/customers/".concat(e,"/")),getProperties:e=>n.get("/customers/".concat(e,"/properties/")),addProperty:(e,r)=>n.post("/customers/".concat(e,"/add_property/"),r),getContacts:e=>n.get("/customers/".concat(e,"/contacts/")),addContact:(e,r)=>n.post("/customers/".concat(e,"/add_contact/"),r),getReviews:e=>n.get("/customers/".concat(e,"/reviews/")),addReview:(e,r)=>n.post("/customers/".concat(e,"/add_review/"),r)},c={getAll:e=>n.get("/properties/",{params:e}),getById:e=>n.get("/properties/".concat(e,"/")),create:e=>n.post("/properties/",e),update:(e,r)=>n.put("/properties/".concat(e,"/"),r),delete:e=>n.delete("/properties/".concat(e,"/"))},d={getAll:e=>n.get("/jobs/",{params:e}),getById:e=>n.get("/jobs/".concat(e,"/")),create:e=>n.post("/jobs/",e),update:(e,r)=>n.put("/jobs/".concat(e,"/"),r),delete:e=>n.delete("/jobs/".concat(e,"/")),updateStatus:(e,r)=>n.patch("/jobs/".concat(e,"/update_status/"),{status:r}),assignTechnicians:(e,r)=>n.patch("/jobs/".concat(e,"/assign_technicians/"),{technician_ids:r})},l={getAll:e=>n.get("/jobs/technicians/",{params:e}),getAvailable:e=>n.get("/jobs/technicians/available/",{params:e}),getById:e=>n.get("/jobs/technicians/".concat(e,"/"))},p={getItems:e=>n.get("/inventory/items/",{params:e}),getItemById:e=>n.get("/inventory/items/".concat(e,"/")),createItem:e=>n.post("/inventory/items/",e),updateItem:(e,r)=>n.put("/inventory/items/".concat(e,"/"),r),deleteItem:e=>n.delete("/inventory/items/".concat(e,"/")),adjustStock:(e,r,t)=>n.post("/inventory/items/".concat(e,"/adjust_stock/"),{quantity:r,reason:t}),getCategories:()=>n.get("/inventory/categories/"),createCategory:e=>n.post("/inventory/categories/",e),getSuppliers:()=>n.get("/inventory/suppliers/"),createSupplier:e=>n.post("/inventory/suppliers/",e),getStockMovements:e=>n.get("/inventory/stock-movements/",{params:e}),getPurchaseOrders:e=>n.get("/inventory/purchase-orders/",{params:e}),createPurchaseOrder:e=>n.post("/inventory/purchase-orders/",e),updatePurchaseOrder:(e,r)=>n.put("/inventory/purchase-orders/".concat(e,"/"),r)},g={getBusinessOverview:()=>n.get("/analytics/analytics/business_overview/"),getFinancialSummary:()=>n.get("/analytics/analytics/financial_summary/"),getOperationalMetrics:()=>n.get("/analytics/analytics/operational_metrics/"),getCustomerInsights:()=>n.get("/analytics/analytics/customer_insights/"),getInventoryInsights:()=>n.get("/analytics/analytics/inventory_insights/")},u=n},8932:(e,r,t)=>{t.r(r),t.d(r,{default:()=>C});var a=t(5043),o=t(6446),n=t(5865),s=t(7784),i=t(2143),c=t(6494),d=t(8903),l=t(1045),p=t(3845),g=t(7392),u=t(141),h=t(4770),x=t(9893),m=t(3632),b=t(3260),v=t(6291),A=t(6196),y=t(2555),f=t(45),j=t(1906),F=t(579);const w=["variant","pill","glow","children","sx"],k=e=>{let{variant:r="primary",pill:t=!0,glow:a=!1,children:o,sx:n}=e,s=(0,f.A)(e,w);const i=(()=>{const e={borderRadius:t?"32px":"16px",padding:"12px 24px",fontWeight:500,fontSize:"0.875rem",letterSpacing:"0.02em",textTransform:"none",boxShadow:"none",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&::before":a?{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"inherit",filter:"blur(8px)",opacity:0,transition:"opacity 0.3s ease",zIndex:-1}:{},"&:hover":{transform:"translateY(-2px)","&::before":a?{opacity:.6}:{}},"&:active":{transform:"translateY(0px)"},"&:disabled":{transform:"none",opacity:.6}};switch(r){case"primary":return(0,y.A)((0,y.A)({},e),{},{background:"linear-gradient(135deg, #4A90E2 0%, #357ABD 100%)",color:"#FFFFFF",border:"none","&:hover":(0,y.A)((0,y.A)({},e["&:hover"]),{},{background:"linear-gradient(135deg, #5A9FE6 0%, #4589CC 100%)",boxShadow:"0px 8px 25px rgba(74, 144, 226, 0.4)"})});case"secondary":return(0,y.A)((0,y.A)({},e),{},{background:"linear-gradient(135deg, #FF6B6B 0%, #E55555 100%)",color:"#FFFFFF",border:"none","&:hover":(0,y.A)((0,y.A)({},e["&:hover"]),{},{background:"linear-gradient(135deg, #FF7979 0%, #F66363 100%)",boxShadow:"0px 8px 25px rgba(255, 107, 107, 0.4)"})});case"soft":return(0,y.A)((0,y.A)({},e),{},{background:"rgba(74, 144, 226, 0.1)",color:"#2E5A8A",border:"1px solid rgba(74, 144, 226, 0.2)","&:hover":(0,y.A)((0,y.A)({},e["&:hover"]),{},{background:"rgba(74, 144, 226, 0.15)",border:"1px solid rgba(74, 144, 226, 0.3)",boxShadow:"0px 6px 20px rgba(74, 144, 226, 0.15)"})});case"ghost":return(0,y.A)((0,y.A)({},e),{},{background:"transparent",color:"#4A90E2",border:"1.5px solid rgba(74, 144, 226, 0.3)","&:hover":(0,y.A)((0,y.A)({},e["&:hover"]),{},{background:"rgba(74, 144, 226, 0.05)",border:"1.5px solid #4A90E2",boxShadow:"0px 4px 15px rgba(74, 144, 226, 0.1)"})});case"success":return(0,y.A)((0,y.A)({},e),{},{background:"linear-gradient(135deg, #51C878 0%, #3A9B5C 100%)",color:"#FFFFFF",border:"none","&:hover":(0,y.A)((0,y.A)({},e["&:hover"]),{},{background:"linear-gradient(135deg, #61D888 0%, #4AAB6C 100%)",boxShadow:"0px 8px 25px rgba(81, 200, 120, 0.4)"})});case"warning":return(0,y.A)((0,y.A)({},e),{},{background:"linear-gradient(135deg, #FFD93D 0%, #E6C234 100%)",color:"#8B6914",border:"none","&:hover":(0,y.A)((0,y.A)({},e["&:hover"]),{},{background:"linear-gradient(135deg, #FFE066 0%, #F0CC44 100%)",boxShadow:"0px 8px 25px rgba(255, 217, 61, 0.4)"})});case"danger":return(0,y.A)((0,y.A)({},e),{},{background:"linear-gradient(135deg, #FF4757 0%, #E84355 100%)",color:"#FFFFFF",border:"none","&:hover":(0,y.A)((0,y.A)({},e["&:hover"]),{},{background:"linear-gradient(135deg, #FF5E6C 0%, #F25865 100%)",boxShadow:"0px 8px 25px rgba(255, 71, 87, 0.4)"})});default:return e}})();return(0,F.jsx)(j.A,(0,y.A)((0,y.A)({sx:[i,...Array.isArray(n)?n:[n]]},s),{},{children:o}))};var S=t(9274);const C=()=>{const e=(0,b.Zp)(),[r,t]=(0,a.useState)([]),[y,f]=(0,a.useState)(!0),[j,w]=(0,a.useState)(""),[C,I]=(0,a.useState)("all"),z=a.useCallback((async()=>{try{f(!0);const e={};j&&(e.search=j),"all"!==C&&(e.customer_type=C);const r=await v.dr.getAll(e);t(r.data.results||[])}catch(e){console.error("Error fetching customers:",e),t([])}finally{f(!1)}}),[j,C]);(0,a.useEffect)((()=>{z()}),[z]);const P=r=>{e("/customers/".concat(r))};return(0,F.jsxs)(o.A,{sx:{p:{xs:2,md:3}},children:[(0,F.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:[(0,F.jsx)(n.A,{variant:"h4",component:"h1",sx:{fontWeight:700,background:"linear-gradient(135deg, #2E5A8A 0%, #4A90E2 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Customers"}),(0,F.jsx)(k,{variant:"primary",startIcon:(0,F.jsx)(u.A,{}),onClick:()=>e("/customers/new"),glow:!0,children:"Add Customer"})]}),(0,F.jsx)(A.A,{variant:"glass",sx:{p:3,mb:4},children:(0,F.jsxs)(o.A,{display:"flex",gap:2,flexWrap:"wrap",children:[(0,F.jsx)(s.A,{label:"Search customers",variant:"outlined",value:j,onChange:e=>w(e.target.value),sx:{minWidth:300,flex:1,"& .MuiOutlinedInput-root":{borderRadius:"16px"}},placeholder:"Search by name, email, or phone..."}),(0,F.jsxs)(s.A,{select:!0,label:"Customer Type",value:C,onChange:e=>I(e.target.value),sx:{minWidth:180,"& .MuiOutlinedInput-root":{borderRadius:"16px"}},children:[(0,F.jsx)(i.A,{value:"all",children:"All Types"}),(0,F.jsx)(i.A,{value:"residential",children:"Residential"}),(0,F.jsx)(i.A,{value:"commercial",children:"Commercial"})]})]})}),y?(0,F.jsx)(S.A,{variant:"component",message:"Loading customers...",size:50}):0===r.length?(0,F.jsx)(A.A,{variant:"gradient",sx:{textAlign:"center"},children:(0,F.jsxs)(c.A,{sx:{p:4},children:[(0,F.jsx)(n.A,{variant:"h5",sx:{mb:2,fontWeight:600},children:"No customers found"}),(0,F.jsx)(n.A,{color:"text.secondary",sx:{mb:3,fontSize:"1.1rem"},children:j||"all"!==C?"Try adjusting your search filters or add a new customer":"Add your first customer to get started with managing your business"}),(0,F.jsx)(k,{variant:"primary",startIcon:(0,F.jsx)(u.A,{}),onClick:()=>e("/customers/new"),size:"large",glow:!0,children:"Add First Customer"})]})}):(0,F.jsx)(d.Ay,{container:!0,spacing:3,children:r.map((e=>(0,F.jsx)(d.Ay,{item:!0,xs:12,sm:6,lg:4,children:(0,F.jsx)(A.A,{variant:"elevated",glow:!0,sx:{height:"100%",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-6px) scale(1.02)"}},onClick:()=>P(e.id),children:(0,F.jsxs)(c.A,{sx:{p:3},children:[(0,F.jsxs)(o.A,{display:"flex",alignItems:"center",mb:2.5,children:[(0,F.jsx)(l.A,{sx:{mr:2,width:48,height:48,background:"commercial"===e.customer_type?"linear-gradient(135deg, #4A90E2 0%, #357ABD 100%)":"linear-gradient(135deg, #FF6B6B 0%, #E55555 100%)",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.15)"},children:"commercial"===e.customer_type?(0,F.jsx)(h.A,{}):(0,F.jsx)(x.A,{})}),(0,F.jsxs)(o.A,{flexGrow:1,children:[(0,F.jsx)(n.A,{variant:"h6",component:"div",noWrap:!0,sx:{fontWeight:600,mb:.5},children:e.full_name}),(0,F.jsx)(p.A,{label:e.customer_type,size:"small",sx:{borderRadius:"12px",fontSize:"0.75rem",fontWeight:500,backgroundColor:"commercial"===e.customer_type?"rgba(74, 144, 226, 0.1)":"rgba(255, 107, 107, 0.1)",color:"commercial"===e.customer_type?"#2E5A8A":"#C53030",border:"1px solid ".concat("commercial"===e.customer_type?"rgba(74, 144, 226, 0.2)":"rgba(255, 107, 107, 0.2)")}})]}),(0,F.jsx)(g.A,{onClick:r=>{r.stopPropagation(),P(e.id)},sx:{borderRadius:"12px",backgroundColor:"rgba(74, 144, 226, 0.08)","&:hover":{backgroundColor:"rgba(74, 144, 226, 0.15)",transform:"scale(1.1)"}},children:(0,F.jsx)(m.A,{sx:{color:"primary.main"}})})]}),(0,F.jsxs)(o.A,{sx:{space:1.5},children:[(0,F.jsxs)(n.A,{variant:"body2",color:"text.secondary",noWrap:!0,sx:{display:"flex",alignItems:"center",mb:1,fontSize:"0.875rem"},children:[(0,F.jsx)(o.A,{component:"span",sx:{mr:1,fontSize:"1rem"},children:"\ud83d\udce7"}),e.email]}),(0,F.jsxs)(n.A,{variant:"body2",color:"text.secondary",noWrap:!0,sx:{display:"flex",alignItems:"center",mb:1,fontSize:"0.875rem"},children:[(0,F.jsx)(o.A,{component:"span",sx:{mr:1,fontSize:"1rem"},children:"\ud83d\udcde"}),e.phone]}),(0,F.jsxs)(n.A,{variant:"body2",color:"text.secondary",noWrap:!0,sx:{display:"flex",alignItems:"center",mb:2,fontSize:"0.875rem"},children:[(0,F.jsx)(o.A,{component:"span",sx:{mr:1,fontSize:"1rem"},children:"\ud83d\udccd"}),e.full_address]})]}),(0,F.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{pt:2,borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,F.jsxs)(n.A,{variant:"caption",sx:{color:"primary.main",fontWeight:500,fontSize:"0.75rem"},children:[e.property_count," ",1===e.property_count?"property":"properties"]}),(0,F.jsx)(n.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem"},children:new Date(e.created_at).toLocaleDateString()})]})]})})},e.id)))})]})}},9893:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(9662),o=t(579);const n=(0,a.A)((0,o.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")}}]);
//# sourceMappingURL=932.35785390.chunk.js.map